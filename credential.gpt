name: azure-openai-credential

#!/usr/bin/env bash

az login --only-show-errors -o none

subscription_id=$(gptscript -q --cache=false sys.prompt '{"message":"Please enter the name of the Resource Group.","fields":"name"}')
subscription_id=$(echo $subscription_id | jq -r '.name')

resource_group=$(gptscript -q --cache=false sys.prompt '{"message":"Please enter the name of the Resource Group.","fields":"name"}')
resource_group=$(echo $resource_group | jq -r '.name')

echo "{\"env\":{\"GPTSCRIPT_AZURE_RESOURCE_GROUP\":\"$resource_group\",\"AZURE_SUBSCRIPTION_ID\":\"$subscription_id\"}}"